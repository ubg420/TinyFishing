!function(){var e,t,i,o,n=18e4,a=!1,d=!1;function s(){clearTimeout(e),e=null}window.addEventListener("message",function(e){/(www|stage|stage-edit|dev|stage2).coolmathgames.com/i.test(e.origin)&&"valid-subscriber"==e.data&&!0;if(e.origin.includes("truex.com")){const t=e.data;t.message,t.message,"finish"===t.message&&w()}}),$.fn.once=function(e){return void 0===e&&(e="processed"),this.not("."+e).addClass(e)};var r,l=window.innerWidth,g=window.innerHeight;function h(){let e=/Android|iPhone/i.test(navigator.userAgent),t=$(window).width()<=640||$(window).height()<=500;return!(/iPad|Android/i.test(navigator.userAgent)&&!/Mobile/i.test(navigator.userAgent)&&$(window).width()>640&&$(window).height()>500)&&(e&&t)}function c(e,t){if(void 0===e||void 0===t){var i=(o=document.getElementById("html5game"))?{width:o.clientWidth,height:o.clientHeight}:null;i?(e=i.width,t=i.height):r?l>640&&g>500?(e=640,t=480):(e=window.innerWidth,t=window.innerHeight,_()||d||(e=300,t=250)):(e=640,t=480)}var o;window.parent.postMessage({action:"resize",width:e,height:t},"*")}r=h(),window.addEventListener("orientationchange",function(){var e,t;e=window.innerWidth,t=window.innerHeight,l=t,g=e,c(window.innerWidth,window.innerHeight)});const p=new CustomEvent("adBreakComplete"),u=new CustomEvent("adBreakStart");function w(){d=!1,clearTimeout(i),$(".ads-popup").remove(),y(),e=setTimeout(function(){currentTime=new Date,s()},n),void 0!==o&&o&&o.destroy(),null!=document.getElementById("canvas")&&document.getElementById("canvas").focus(),void 0!==a&&a?window.top.postMessage("reward completed","*"):window.top.postMessage("midroll completed","*"),c(l,g)}function _(){return window.innerHeight>window.innerWidth}function m(){window.top.postMessage("reward called","*"),$(".load-wrap").show(),w(),A(),E(),c(),a=!0}function v(){w(),a=!1}function y(){document.dispatchEvent(p)}function A(){midRollAdStarted=!0,$(".ads-popup").show()}function E(){$("#img-button-self").html("&nbsp;"),$("#timer_div").addClass("continue-button-link"),$("#afg_container").addClass("top-continue-btn")}window.cmgRewardAds=function(){if(a=!0,$(".load-wrap").show(),!r||r&&_()){network_user_id="cmg"+Math.random().toString(36).substring(2);var e=(i="_ga",(o=document.cookie.match("(^|;) ?"+i+"=([^;]*)(;|$)"))?o[2]:null);e&&(network_user_id=e.replace("GA","cmg").replaceAll(".",""));var t="375f2f2b728700cd991bb24601b3841c98375886";r&&(t="0d188638b7d82efe6e2e696c3ab3e06d88e35cbf"),truex_options={network_user_id:network_user_id,partner_config_hash:t},"undefined"!=typeof truex?truex.client(truex_options,function(e){e.requestActivity(function(t){if(!t||!t.window_url)return void m();d=!0,$(".load-wrap").show(),document.dispatchEvent(u),A(),E(),c(),a=!0,e.trackTriggerPointImpression(t),$(".ads-popup").show(),$("#afg_container .load-wrap").hide(),$("#afg_preloader").hide(),$(".ads-popup").html(`<iframe src="${t.window_url}" style="width:100%; height:100%; border:none;"></iframe>`);let i=!1;t.onCredit(function(e){i||(i=!0),w()}),t.onClose(function(e){i||w()})})}):m()}else m();var i,o};var f=function(e,t,i){void 0===i?i="":i,this.playing_=!1,this.adsActive_=!1,this.adsDone_=!1,this.displayAds=null==e||e,this.adTagUrl_=t,this.videoPlayer_=new T(i),h()?(this.videoPlayer_.width=300,this.videoPlayer_.height=250):(this.videoPlayer_.width=640,this.videoPlayer_.height=480),this.ads_=new P(this,this.videoPlayer_),this.ads_.initialUserAction(),this.videoPlayer_.preloadContent(this.bind_(this,this.loadAds_)),this.adsDone_=!0};f.prototype.bind_=function(e,t){return function(){t.apply(e,arguments)}},f.prototype.loadAds_=function(){this.ads_.requestAds(this.adTagUrl_)};var T=function(e){this.contentPlayer=document.getElementById(e+"content123"),this.adContainer=document.getElementById(e+"adcontainer"),this.videoPlayerContainer_=document.getElementById(e+"videoplayer"),this.width=640,this.height=480};T.prototype.preloadContent=function(e){e()},T.prototype.play=function(){this.contentPlayer.play()},T.prototype.pause=function(){this.contentPlayer&&this.contentPlayer.pause()};var P=function(e,t){this.application_=e,this.videoPlayer_=t,this.customClickDiv_=document.getElementById("customClick"),this.contentCompleteCalled_=!1,google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),this.adDisplayContainer_=new google.ima.AdDisplayContainer(this.videoPlayer_.adContainer,this.videoPlayer_.contentPlayer,this.customClickDiv_),this.adsLoader_=new google.ima.AdsLoader(this.adDisplayContainer_),this.adsManager_=null,this.adsLoader_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,this.onAdsManagerLoaded_,!1,this),this.adsLoader_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this)};P.prototype.initialUserAction=function(){this.adDisplayContainer_.initialize(),void 0!==this.videoPlayer_&&void 0!==this.videoPlayer_.contentPlayer&&null!=this.videoPlayer_.contentPlayer&&this.videoPlayer_.contentPlayer.load()},P.prototype.requestAds=function(e){const t=new google.ima.AdsRequest;a&&(t.setAdWillAutoPlay(!1),t.setAdWillPlayMuted(!1)),t.adTagUrl=e,t.linearAdSlotWidth=this.videoPlayer_.width,t.linearAdSlotHeight=this.videoPlayer_.height,t.nonLinearAdSlotWidth=this.videoPlayer_.width,t.nonLinearAdSlotHeight=this.videoPlayer_.height,this.adsLoader_.requestAds(t)},P.prototype.onAdsManagerLoaded_=function(e){var t=new google.ima.AdsRenderingSettings;t.restoreCustomPlaybackStateOnAdBreakComplete=!0,this.adsManager_=e.getAdsManager(this.videoPlayer_.contentPlayer,t),o=this.adsManager_,this.adsManager_.addEventListener(google.ima.AdEvent.Type.STARTED,()=>{a?(this.adsManager_.pause(),$(".load-wrap").remove(),$(".top-continue-btn").remove(),$(".ads-popup").prepend('\n    <a href="/play" class="playNow" >\n    <div class="playWrapper">\n      <div id="playAdsNowButton">\n        <svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg">\n          <path d="M176 480C148.6 480 128 457.6 128 432v-352c0-25.38 20.4-47.98 48.01-47.98c8.686 0 17.35 2.352 25.02 7.031l288 176C503.3 223.8 512 239.3 512 256s-8.703 32.23-22.97 40.95l-288 176C193.4 477.6 184.7 480 176 480z"></path>\n        </svg>\n        </div>\n      </div>\n    </a>\n    '),$(".ad-container").addClass("flex-center"),$(".playNow").off("click").on("click",function(e){if($(".playNow").remove(),e.preventDefault(),o){o.resume(),$(".ad-container").show();var t=o.getCurrentAd();void 0===t||t.isLinear()||setTimeout(()=>{w()},5e3)}})):(this.adsManager_.resume(),$(".ad-container").show())},!1,this),this.adsManager_.setVolume(0),!1===window.pwMuteFlag&&this.adsManager_.setVolume(.01),a&&this.adsManager_.setVolume(1),this.processAdsManager_(this.adsManager_),o=this.adsManager_},P.prototype.processAdsManager_=function(e){e.isCustomClickTrackingUsed()&&(this.customClickDiv_.style.display="table"),e.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,this.onAdError_,!1,this);[google.ima.AdEvent.Type.ALL_ADS_COMPLETED,google.ima.AdEvent.Type.COMPLETE,google.ima.AdEvent.Type.FIRST_QUARTILE,google.ima.AdEvent.Type.LOADED,google.ima.AdEvent.Type.MIDPOINT,google.ima.AdEvent.Type.STARTED,google.ima.AdEvent.Type.THIRD_QUARTILE,google.ima.AdEvent.Type.USER_CLOSE,google.ima.AdEvent.Type.PAUSED].forEach(t=>{e.addEventListener(t,this.onAdEvent_,!1,this)}),e.init(this.videoPlayer_.width,this.videoPlayer_.height,google.ima.ViewMode.NORMAL),e.start()},window.is_ad_loaded=!1,window.is_ad_started=!1,P.prototype.onAdEvent_=function(e){switch(e.type===google.ima.AdEvent.Type.STARTED?(c(),window.parent.postMessage("adBreakStart","*")):e.type!==google.ima.AdEvent.Type.COMPLETE&&e.type!==google.ima.AdEvent.Type.ALL_ADS_COMPLETED&&e.type!==google.ima.AdEvent.Type.USER_CLOSE||(c(l,g),window.parent.postMessage("adBreakComplete","*")),e.type){case google.ima.AdEvent.Type.LOADED:is_ad_loaded=!0,clearTimeout(i),t=setTimeout(()=>{"undefined"==typeof is_ad_started||is_ad_started||w()},8e3),["#content123","#m-content123","#r-content123"].forEach(e=>{const t=$(e);t.length&&t.is(":visible")&&t.hide()});break;case google.ima.AdEvent.Type.STARTED:is_ad_started=!0,clearTimeout(t),c(window.innerWidth,window.innerHeight);break;case google.ima.AdEvent.Type.COMPLETE:case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:case google.ima.AdEvent.Type.USER_CLOSE:"undefined"!=typeof midRollAdStarted&&midRollAdStarted&&(w(),window.is_ad_loaded=!1,window.is_ad_started=!1)}},P.prototype.onAdError_=function(e){this.adsManager_&&this.adsManager_.destroy(),"undefined"!=typeof midRollAdStarted&&midRollAdStarted&&!a&&w(),a&&function(){let e;window.googletag=window.googletag||{cmd:[]},googletag.cmd.push(()=>{e=googletag.defineOutOfPageSlot("/45966600/H5_Rewarded_ads",googletag.enums.OutOfPageFormat.REWARDED),e&&(e.addService(googletag.pubads()),googletag.pubads().addEventListener("rewardedSlotReady",e=>{e.makeRewardedVisible()}),googletag.pubads().addEventListener("rewardedSlotClosed",()=>{e&&googletag.destroySlots([e]),v()}),googletag.pubads().addEventListener("rewardedSlotGranted",e=>{}),googletag.pubads().addEventListener("slotRenderEnded",t=>{t.slot===e&&t.isEmpty&&v()}),googletag.enableServices(),googletag.pubads().set("document_language","en"),googletag.display(e))})}()}}();